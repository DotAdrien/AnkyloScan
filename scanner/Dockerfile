# √âtape 1 : R√©cup√©ration du binaire RustScan
FROM rustscan/rustscan:2.1.1 as rustscan_bin

# √âtape 2 : Image finale l√©g√®re
FROM debian:bookworm-slim

# Installation de nmap (indispensable) üîç
RUN apt-get update && apt-get install -y nmap && rm -rf /var/lib/apt/lists/*

# Cr√©ation du dossier de partage
WORKDIR /share

# 1. Copie pour le partage (ce qui ira dans le volume)
COPY --from=rustscan_bin /usr/local/bin/rustscan /share/rustscan

# 2. Copie pour le syst√®me (pour que la commande "rustscan" fonctionne localement)
COPY --from=rustscan_bin /usr/local/bin/rustscan /usr/local/bin/rustscan

# On lance
CMD ["rustscan", "--help"]